<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="http," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="HTTP是一个属于应用层的面向对象的协议，由于其简捷、快速的方式，适用于分布式超媒体信息系统。它于1990年提出，经过几年的使用与发展，得到不断地完善和扩展。目前在WWW中使用的是HTTP/1.0的第六版，HTTP/1.1的规范化工作正在进行之中，而且HTTP-NG(NextGeneration of HTTP)的建议已经提出。
HTTPHTTP协议的主要特点
支持客户/服务器模式。
简单快速：客">
<meta property="og:type" content="article">
<meta property="og:title" content="http and https details">
<meta property="og:url" content="http://yoursite.com/2016/10/04/protocol-http-and-https-details/index.html">
<meta property="og:site_name" content="蓝色骑士">
<meta property="og:description" content="HTTP是一个属于应用层的面向对象的协议，由于其简捷、快速的方式，适用于分布式超媒体信息系统。它于1990年提出，经过几年的使用与发展，得到不断地完善和扩展。目前在WWW中使用的是HTTP/1.0的第六版，HTTP/1.1的规范化工作正在进行之中，而且HTTP-NG(NextGeneration of HTTP)的建议已经提出。
HTTPHTTP协议的主要特点
支持客户/服务器模式。
简单快速：客">
<meta property="og:image" content="http://yoursite.com/http-and-https-details/https_establish.jpg">
<meta property="og:updated_time" content="2016-10-04T09:42:39.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="http and https details">
<meta name="twitter:description" content="HTTP是一个属于应用层的面向对象的协议，由于其简捷、快速的方式，适用于分布式超媒体信息系统。它于1990年提出，经过几年的使用与发展，得到不断地完善和扩展。目前在WWW中使用的是HTTP/1.0的第六版，HTTP/1.1的规范化工作正在进行之中，而且HTTP-NG(NextGeneration of HTTP)的建议已经提出。
HTTPHTTP协议的主要特点
支持客户/服务器模式。
简单快速：客">
<meta name="twitter:image" content="http://yoursite.com/http-and-https-details/https_establish.jpg">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/2016/10/04/protocol-http-and-https-details/"/>

  <title> http and https details | 蓝色骑士 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">蓝色骑士</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">I'CODING MY LIFE.</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                http and https details
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-04T17:42:39+08:00" content="2016-10-04">
              2016-10-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/protocol/" itemprop="url" rel="index">
                    <span itemprop="name">protocol</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>HTTP是一个属于应用层的面向对象的协议，由于其简捷、快速的方式，适用于分布式超媒体信息系统。它于1990年提出，经过几年的使用与发展，得到不断地完善和扩展。目前在WWW中使用的是HTTP/1.0的第六版，HTTP/1.1的规范化工作正在进行之中，而且HTTP-NG(Next<br>Generation of HTTP)的建议已经提出。</p>
<h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><h3 id="HTTP协议的主要特点"><a href="#HTTP协议的主要特点" class="headerlink" title="HTTP协议的主要特点"></a>HTTP协议的主要特点</h3><ol>
<li>支持客户/服务器模式。</li>
<li>简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。</li>
<li>灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type加以标记。</li>
<li>无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。</li>
<li>无状态：HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。</li>
</ol>
<h3 id="HTTP协议URL详解"><a href="#HTTP协议URL详解" class="headerlink" title="HTTP协议URL详解"></a>HTTP协议URL详解</h3><p>http（超文本传输协议）是一个基于请求与响应模式的、无状态的、应用层的协议，常基于TCP的连接方式，HTTP1.1版本中给出一种持续连接的机制，绝大多数的Web开发，都是构建在HTTP协议之上的Web应用。<br>HTTP URL (URL是一种特殊类型的URI，包含了用于查找某个资源的足够的信息)的格式如下：<br><a href="http://host[&quot;:&quot;port][abs_path" target="_blank" rel="external">http://host[&quot;:&quot;port][abs_path</a>] 　　http表示要通过HTTP协议来定位网络资源；host表示合法的Internet主机域名或者IP地址；port指定一个端口号，为空则使用缺省端口80；abs_path指定请求资源的URI；如果URL中没有给出abs_path，那么当它作为请求URI时，必须以“/”的形式给出，通常这个工作浏览器自动帮我们完成。<br><em>eg:</em></p>
<ol>
<li>输入：www.guet.edu.cn  浏览器自动转换成：<a href="http://www.guet.edu.cn/" target="_blank" rel="external">http://www.guet.edu.cn/</a></li>
<li>http:192.168.0.116:8080/index.jsp </li>
</ol>
<h3 id="HTTP协议请求详解"><a href="#HTTP协议请求详解" class="headerlink" title="HTTP协议请求详解"></a>HTTP协议请求详解</h3><p>http请求由三部分组成，分别是：请求行、消息报头、请求正文<br><code>CRLF -- Carriage-Return Line-Feed 回车换行</code></p>
<ol>
<li>请求行以一个方法符号开头，以空格分开，后面跟着请求的URI和协议的版本，格式如下：<br>Method Request-URI HTTP-Version CRLF<br>其中<br>Method表示请求方法；Request-URI是一个统一资源标识符；HTTP-Version表示请求的HTTP协议版本；CRLF表示回车和换行（除了作为结尾的CRLF外，不允许出现单独的CR或LF字符）。<br>请求方法（所有方法全为大写）有多种，各个方法的解释如下：<br>GET　　　　请求获取Request-URI所标识的资源<br>POST　　　 在Request-URI所标识的资源后附加新的数据<br>HEAD　　　 请求获取由Request-URI所标识的资源的响应消息报头<br>PUT　　　　 请求服务器存储一个资源，并用Request-URI作为其标识<br>DELETE　　 请求服务器删除Request-URI所标识的资源<br>TRACE　　  请求服务器回送收到的请求信息，主要用于测试或诊断<br>CONNECT　 保留将来使用<br>OPTIONS　  请求查询服务器的性能，或者查询与资源相关的选项和需求<br>应用举例：<br>GET方法：在浏览器的地址栏中输入网址的方式访问网页时，浏览器采用GET方法向服务器获取资源，eg:GET /form.html HTTP/1.1<br>(CRLF)<br>POST方法要求被请求服务器接受附在请求后面的数据，常用于提交表单。<br>eg：POST /reg.jsp HTTP/ (CRLF)<br>Accept:image/gif,image/x-xbit,… (CRLF)<br>…<br>HOST:www.guet.edu.cn (CRLF)<br>Content-Length:22 (CRLF)<br>Connection:Keep-Alive (CRLF)<br>Cache-Control:no-cache (CRLF)<br>(CRLF)         //该CRLF表示消息报头已经结束，在此之前为消息报头<br>user=jeffrey&amp;pwd=1234  //此行以下为提交的数据<br>HEAD方法与GET方法几乎是一样的，对于HEAD请求的回应部分来说，它的HTTP头部中包含的信息与通过GET请求所得到的信息是相同的。利用这个方法，不必传输整个资源内容，就可以得到Request-URI所标识的资源的信息。该方法常用于测试超链接的有效性，是否可以访问，以及最近是否更新。</li>
<li>请求报头后述</li>
<li>请求正文(略) </li>
</ol>
<h3 id="HTTP协议响应详解"><a href="#HTTP协议响应详解" class="headerlink" title="HTTP协议响应详解"></a>HTTP协议响应详解</h3><p>在接收和解释请求消息后，服务器返回一个HTTP响应消息。<br>HTTP响应也是由三个部分组成，分别是：状态行、消息报头、响应正文</p>
<ol>
<li>状态行格式如下：<br>HTTP-Version Status-Code Reason-Phrase CRLF<br>其中，HTTP-Version表示服务器HTTP协议的版本；Status-Code表示服务器发回的响应状态代码；Reason-Phrase表示状态代码的文本描述。<br>状态代码有三位数字组成，第一个数字定义了响应的类别，且有五种可能取值：<br>1xx：指示信息–表示请求已接收，继续处理<br>2xx：成功–表示请求已被成功接收、理解、接受<br>3xx：重定向–要完成请求必须进行更进一步的操作<br>4xx：客户端错误–请求有语法错误或请求无法实现<br>5xx：服务器端错误–服务器未能实现合法的请求<br>常见状态代码、状态描述、说明：<br>200 OK      //客户端请求成功<br>400 Bad Request  //客户端请求有语法错误，不能被服务器所理解<br>401 Unauthorized //请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用<br>403 Forbidden  //服务器收到请求，但是拒绝提供服务<br>404 Not Found  //请求资源不存在，eg：输入了错误的URL<br>500 Internal Server Error //服务器发生不可预期的错误<br>503 Server Unavailable  //服务器当前不能处理客户端的请求，一段时间后可能恢复正常<br>eg：HTTP/1.1 200 OK （CRLF）</li>
<li>响应报头后述</li>
<li>响应正文就是服务器返回的资源的内容 </li>
</ol>
<h3 id="HTTP协议消息报头详解"><a href="#HTTP协议消息报头详解" class="headerlink" title="HTTP协议消息报头详解"></a>HTTP协议消息报头详解</h3><p>HTTP消息由客户端到服务器的请求和服务器到客户端的响应组成。请求消息和响应消息都是由开始行（对于请求消息，开始行就是请求行，对于响应消息，开始行就是状态行），消息报头（可选），空行（只有CRLF的行），消息正文（可选）组成。</p>
<p>HTTP消息报头包括普通报头、请求报头、响应报头、实体报头。<br>每一个报头域都是由名字+“：”+空格+值 组成，消息报头域的名字是大小写无关的。</p>
<ol>
<li><p>普通报头 　　在普通报头中，有少数报头域用于所有的请求和响应消息，但并不用于被传输的实体，只用于传输的消息。<br>eg：<br>Cache-Control<br>用于指定缓存指令，缓存指令是单向的（响应中出现的缓存指令在请求中未必会出现），且是独立的（一个消息的缓存指令不会影响另一个消息处理的缓存机制），HTTP1.0使用的类似的报头域为Pragma。<br>请求时的缓存指令包括：no-cache（用于指示请求或响应消息不能缓存）、no-store、max-age、max-stale、min-fresh、only-if-cached;<br>响应时的缓存指令包括：public、private、no-cache、no-store、no-transform、must-revalidate、proxy-revalidate、max-age、s-maxage.<br>eg：为了指示IE浏览器（客户端）不要缓存页面，服务器端的JSP程序可以编写如下：response.sehHeader(“Cache-Control”,”no-cache”);<br>//response.setHeader(“Pragma”,”no-cache”);作用相当于上述代码，通常两者//合用<br>这句代码将在发送的响应消息中设置普通报头域：Cache-Control:no-cache<br>Date普通报头域表示消息产生的日期和时间<br>Connection普通报头域允许发送指定连接的选项。例如指定连接是连续，或者指定“close”选项，通知服务器，在响应完成后，关闭连接</p>
</li>
<li><p>请求报头<br>　　请求报头允许客户端向服务器端传递请求的附加信息以及客户端自身的信息。<br>常用的请求报头<br>Accept请求报头域用于指定客户端接受哪些类型的信息。eg：Accept：image/gif，表明客户端希望接受GIF图象格式的资源；Accept：text/html，表明客户端希望接受html文本。<br>Accept-Charset请求报头域用于指定客户端接受的字符集。eg：Accept-Charset:iso-8859-1,gb2312.如果在请求消息中没有设置这个域，缺省是任何字符集都可以接受。、<br>Accept-Encoding请求报头域类似于Accept，但是它是用于指定可接受的内容编码。eg：Accept-Encoding:gzip.deflate.如果请求消息中没有设置这个域服务器假定客户端对各种内容编码都可以接受。<br>Accept-Language请求报头域类似于Accept，但是它是用于指定一种自然语言。eg：Accept-Language:zh-cn.如果请求消息中没有设置这个报头域，服务器假定客户端对各种语言都可以接受。<br>Authorization请求报头域主要用于证明客户端有权查看某个资源。当浏览器访问一个页面时，如果收到服务器的响应代码为401（未授权），可以发送一个包含Authorization请求报头域的请求，要求服务器对其进行验证。<br>Host请求报头域主要用于指定被请求资源的Internet主机和端口号，它通常从HTTP<br>URL中提取出来的，发送请求时，该报头域是必需的，eg：我们在浏览器中输入：<a href="http://www.guet.edu.cn/index.html" target="_blank" rel="external">http://www.guet.edu.cn/index.html</a><br>浏览器发送的请求消息中，就会包含Host请求报头域，如下：Host：www.guet.edu.cn<br>此处使用缺省端口号80，若指定了端口号，则变成：Host：www.guet.edu.cn:指定端口号<br>User-Agent我们上网登陆论坛的时候，往往会看到一些欢迎信息，其中列出了你的操作系统的名称和版本，你所使用的浏览器的名称和版本，这往往让很多人感到很神奇，实际上，服务器应用程序就是从User-Agent这个请求报头域中获取到这些信息。User-Agent请求报头域允许客户端将它的操作系统、浏览器和其它属性告诉服务器。不过，这个报头域不是必需的，如果我们自己编写一个浏览器，不使用User-Agent请求报头域，那么服务器端就无法得知我们的信息了。<br>请求报头举例：<br>GET /form.html HTTP/1.1 (CRLF)<br>Accept:image/gif,image/x-xbitmap,image/jpeg,application/x-shockwave-flash,application/vnd.ms-excel,application/vnd.ms-powerpoint,application/msword,<em>/</em><br>(CRLF)<br>Accept-Language:zh-cn (CRLF)<br>Accept-Encoding:gzip,deflate (CRLF)<br>If-Modified-Since:Wed,05 Jan 2007 11:21:25 GMT (CRLF)<br>If-None-Match:W/“80b1a4c018f3c41:8317” (CRLF)<br>User-Agent:Mozilla/4.0(compatible;MSIE6.0;Windows NT 5.0) (CRLF)<br>Host:www.guet.edu.cn (CRLF)<br>Connection:Keep-Alive (CRLF)<br>(CRLF)</p>
</li>
<li><p>响应报头<br>　　响应报头允许服务器传递不能放在状态行中的附加响应信息，以及关于服务器的信息和对Request-URI所标识的资源进行下一步访问的信息。<br>常用的响应报头<br>Location响应报头域用于重定向接受者到一个新的位置。Location响应报头域常用在更换域名的时候。<br>Server响应报头域包含了服务器用来处理请求的软件信息。与User-Agent请求报头域是相对应的。下面是Server响应报头域的一个例子：Server：Apache-Coyote/1.1<br>WWW-Authenticate响应报头域必须被包含在401（未授权的）响应消息中，客户端收到401响应消息时候，并发送Authorization报头域请求服务器对其进行验证时，服务端响应报头就包含该报头域。<br>eg：WWW-Authenticate:Basic realm=”Basic Auth Test!”  //可以看出服务器对请求资源采用的是基本验证机制。</p>
</li>
<li><p>实体报头<br>　　请求和响应消息都可以传送一个实体。一个实体由实体报头域和实体正文组成，但并不是说实体报头域和实体正文要在一起发送，可以只发送实体报头域。实体报头定义了关于实体正文（eg：有无实体正文）和请求所标识的资源的元信息。<br>常用的实体报头<br>Content-Encoding实体报头域被用作媒体类型的修饰符，它的值指示了已经被应用到实体正文的附加内容的编码，因而要获得Content-Type报头域中所引用的媒体类型，必须采用相应的解码机制。Content-Encoding这样用于记录文档的压缩方法，eg：Content-Encoding：gzip<br>Content-Language实体报头域描述了资源所用的自然语言。没有设置该域则认为实体内容将提供给所有的语言阅读<br>者。eg：Content-Language:da<br>Content-Length实体报头域用于指明实体正文的长度，以字节方式存储的十进制数字来表示。<br>Content-Type实体报头域用语指明发送给接收者的实体正文的媒体类型。eg：<br>Content-Type:text/html;charset=ISO-8859-1<br>Content-Type:text/html;charset=GB2312<br>Last-Modified实体报头域用于指示资源的最后修改日期和时间。<br>Expires实体报头域给出响应过期的日期和时间。为了让代理服务器或浏览器在一段时间以后更新缓存中(再次访问曾访问过的页面时，直接从缓存中加载，缩短响应时间和降低服务器负载)的页面，我们可以使用Expires实体报头域指定页面过期的时间。eg：Expires：Thu，15<br>Sep 2006 16:23:12 GMT<br>HTTP1.1的客户端和缓存必须将其他非法的日期格式（包括0）看作已经过期。eg：为了让浏览器不要缓存页面，我们也可以利用Expires实体报头域，设置为0，jsp中程序如下：response.setDateHeader(“Expires”,”0”);</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpUtil</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">httpGet</span><span class="params">(String httpUrl)</span> </span>&#123;</div><div class="line">        String result = <span class="string">""</span>;</div><div class="line">        DefaultHttpClient httpclient = <span class="keyword">new</span> DefaultHttpClient();<span class="comment">// 创建http客户端</span></div><div class="line">        HttpGet httpget = <span class="keyword">new</span> HttpGet(httpUrl);</div><div class="line">        HttpResponse response = <span class="keyword">null</span>;</div><div class="line">        HttpParams params = httpclient.getParams(); <span class="comment">// 计算网络超时用</span></div><div class="line">        HttpConnectionParams.setConnectionTimeout(params, <span class="number">15</span> * <span class="number">1000</span>);</div><div class="line">        HttpConnectionParams.setSoTimeout(params, <span class="number">20</span> * <span class="number">1000</span>);</div><div class="line">        </div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            response = httpclient.execute(httpget);</div><div class="line">            HttpEntity entity = response.getEntity();<span class="comment">// 得到http的内容</span></div><div class="line">            response.getStatusLine().getStatusCode();<span class="comment">// 得到http的状态返回值</span></div><div class="line">            result = EntityUtils.toString(response.getEntity());<span class="comment">// 得到具体的返回值，一般是xml文件</span></div><div class="line">            entity.consumeContent();<span class="comment">// 如果entity不为空，则释放内存空间</span></div><div class="line">            httpclient.getCookieStore();<span class="comment">// 得到cookis</span></div><div class="line">            httpclient.getConnectionManager().shutdown();<span class="comment">// 关闭http客户端</span></div><div class="line">        &#125; <span class="keyword">catch</span> (ClientProtocolException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">httpPost</span><span class="params">(String httpUrl, String data)</span> </span>&#123;</div><div class="line">        String result = <span class="string">""</span>;</div><div class="line">        DefaultHttpClient httpclient = <span class="keyword">new</span> DefaultHttpClient();</div><div class="line">        HttpPost httpPost = <span class="keyword">new</span> HttpPost(httpUrl);</div><div class="line">        <span class="comment">// httpclient.setCookieStore(DataDefine.mCookieStore);</span></div><div class="line">        </div><div class="line">        HttpParams params = httpclient.getParams(); <span class="comment">// 计算网络超时用</span></div><div class="line">        HttpConnectionParams.setConnectionTimeout(params, <span class="number">15</span> * <span class="number">1000</span>);</div><div class="line">        HttpConnectionParams.setSoTimeout(params, <span class="number">20</span> * <span class="number">1000</span>);</div><div class="line">        httpPost.setHeader(<span class="string">"Content-Type"</span>, <span class="string">"text/xml"</span>);</div><div class="line">        StringEntity httpPostEntity;</div><div class="line">        </div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            httpPostEntity = <span class="keyword">new</span> StringEntity(data, <span class="string">"UTF-8"</span>);</div><div class="line">            httpPost.setEntity(httpPostEntity);</div><div class="line">            HttpResponse response = httpclient.execute(httpPost);</div><div class="line">            HttpEntity entity = response.getEntity();<span class="comment">// 得到http的内容</span></div><div class="line">            response.getStatusLine().getStatusCode();<span class="comment">// 得到http的状态返回值</span></div><div class="line">            result = EntityUtils.toString(response.getEntity());<span class="comment">// 得到具体的返回值，一般是xml文件</span></div><div class="line">            entity.consumeContent();<span class="comment">// 如果entity不为空，则释放内存空间</span></div><div class="line">            httpclient.getCookieStore();<span class="comment">// 得到cookis</span></div><div class="line">            httpclient.getConnectionManager().shutdown();<span class="comment">// 关闭http客户端</span></div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;<span class="comment">// base64是经过编码的字符串，可以理解为字符串</span></div><div class="line">            <span class="comment">// StringEntity httpPostEntity = new StringEntity("UTF-8");</span></div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h2><p>HTTPS（Hypertext Transfer Protocol over Secure Socket<br>Layer，基于SSL的HTTP协议）使用了HTTP协议，但HTTPS使用不同于HTTP协议的默认端口及一个加密、身份验证层（HTTP与TCP之间）。这个协议的最初研发由网景公司进行，提供了身份验证与加密通信方法，现在它被广泛用于互联网上安全敏感的通信。</p>
<p><em>客户端在使用HTTPS方式与Web服务器通信时有以下几个步骤，如图所示。</em></p>
<ol>
<li>客户使用https的URL访问Web服务器，要求与Web服务器建立SSL连接。</li>
<li>Web服务器收到客户端请求后，会将网站的证书信息（证书中包含公钥）传送一份给客户端。</li>
<li>客户端的浏览器与Web服务器开始协商SSL连接的安全等级，也就是信息加密的等级。</li>
<li>客户端的浏览器根据双方同意的安全等级，建立会话密钥，然后利用网站的公钥将会话密钥加密，并传送给网站。</li>
<li>Web服务器利用自己的私钥解密出会话密钥。</li>
<li>Web服务器利用会话密钥加密与客户端之间的通信。</li>
</ol>
<p><img src="http-and-https-details/https_establish.jpg" alt="https"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpsUtil</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> TrustManager[] xtmArray = <span class="keyword">new</span> MytmArray[] &#123; <span class="keyword">new</span> MytmArray() &#125;;<span class="comment">// 创建信任规则列表</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> CONNENT_TIMEOUT = <span class="number">15000</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> READ_TIMEOUT = <span class="number">15000</span>;</div><div class="line">    <span class="keyword">static</span> HostnameVerifier DO_NOT_VERIFY = <span class="keyword">new</span> HostnameVerifier() &#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">verify</span><span class="params">(String hostname, SSLSession session)</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 信任所有主机-对于任何证书都不做检查 Create a trust manager that does not validate</div><div class="line">     * certificate chains， Android 采用X509的证书信息机制，Install the all-trusting trust</div><div class="line">     * manager</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">trustAllHosts</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            SSLContext sc = SSLContext.getInstance(<span class="string">"TLS"</span>);</div><div class="line">            sc.init(<span class="keyword">null</span>, xtmArray, <span class="keyword">new</span> java.security.SecureRandom());</div><div class="line">            HttpsURLConnection</div><div class="line">                    .setDefaultSSLSocketFactory(sc.getSocketFactory());</div><div class="line">            <span class="comment">// 不进行主机名确认,对所有主机</span></div><div class="line">            HttpsURLConnection.setDefaultHostnameVerifier(DO_NOT_VERIFY);</div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// /**</span></div><div class="line">    <span class="comment">// * https get方法，返回值是https请求，服务端返回的数据string类型，数据进行xml解析</span></div><div class="line">    <span class="comment">// * */</span></div><div class="line">    <span class="comment">// public static String HttpsGet(String httpsurl) &#123;</span></div><div class="line">    <span class="comment">// return HttpsPost(httpsurl, null);</span></div><div class="line">    <span class="comment">//</span></div><div class="line">    <span class="comment">// &#125;</span></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * https post方法，返回值是https请求，服务端返回的数据string类型，数据进行xml解析</div><div class="line">     * */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">HttpsPost</span><span class="params">(String httpsurl, String data)</span> </span>&#123;</div><div class="line">        String result = <span class="keyword">null</span>;</div><div class="line">        HttpURLConnection http = <span class="keyword">null</span>;</div><div class="line">        URL url;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            url = <span class="keyword">new</span> URL(httpsurl);</div><div class="line">            <span class="comment">// 判断是http请求还是https请求</span></div><div class="line">            <span class="keyword">if</span> (url.getProtocol().toLowerCase().equals(<span class="string">"https"</span>)) &#123;</div><div class="line">                trustAllHosts();</div><div class="line">                http = (HttpsURLConnection) url.openConnection();</div><div class="line">                ((HttpsURLConnection) http).setHostnameVerifier(DO_NOT_VERIFY);<span class="comment">// 不进行主机名确认</span></div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                http = (HttpURLConnection) url.openConnection();</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            http.setConnectTimeout(CONNENT_TIMEOUT);<span class="comment">// 设置超时时间</span></div><div class="line">            http.setReadTimeout(READ_TIMEOUT);</div><div class="line">            <span class="keyword">if</span> (data == <span class="keyword">null</span>) &#123;</div><div class="line">                http.setRequestMethod(<span class="string">"GET"</span>);<span class="comment">// 设置请求类型</span></div><div class="line">                http.setDoInput(<span class="keyword">true</span>);</div><div class="line">                <span class="comment">// http.setRequestProperty("Content-Type", "text/xml");</span></div><div class="line">                <span class="keyword">if</span> (AppSession.mCookieStore != <span class="keyword">null</span>)</div><div class="line">                    http.setRequestProperty(<span class="string">"Cookie"</span>, AppSession.mCookieStore);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                http.setRequestMethod(<span class="string">"POST"</span>);<span class="comment">// 设置请求类型为post</span></div><div class="line">                http.setDoInput(<span class="keyword">true</span>);</div><div class="line">                http.setDoOutput(<span class="keyword">true</span>);</div><div class="line">                <span class="comment">// http.setRequestProperty("Content-Type", "text/xml");</span></div><div class="line">                <span class="keyword">if</span> (AppSession.mCookieStore != <span class="keyword">null</span></div><div class="line">                        &amp;&amp; AppSession.mCookieStore.trim().length() &gt; <span class="number">0</span>)</div><div class="line">                    http.setRequestProperty(<span class="string">"Cookie"</span>, AppSession.mCookieStore);</div><div class="line"></div><div class="line">                DataOutputStream out = <span class="keyword">new</span> DataOutputStream(</div><div class="line">                        http.getOutputStream());</div><div class="line">                out.writeBytes(data);</div><div class="line">                out.flush();</div><div class="line">                out.close();</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">// 设置http返回状态200（ok）还是403</span></div><div class="line">            AppSession.httpsResponseCode = http.getResponseCode();</div><div class="line">            BufferedReader in = <span class="keyword">null</span>;</div><div class="line">            <span class="keyword">if</span> (AppSession.httpsResponseCode == <span class="number">200</span>) &#123;</div><div class="line">                getCookie(http);</div><div class="line">                in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(</div><div class="line">                        http.getInputStream()));</div><div class="line">            &#125; <span class="keyword">else</span></div><div class="line">                in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(</div><div class="line">                        http.getErrorStream()));</div><div class="line">            String temp = in.readLine();</div><div class="line">            <span class="keyword">while</span> (temp != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">if</span> (result != <span class="keyword">null</span>)</div><div class="line">                    result += temp;</div><div class="line">                <span class="keyword">else</span></div><div class="line">                    result = temp;</div><div class="line">                temp = in.readLine();</div><div class="line">            &#125;</div><div class="line">            in.close();</div><div class="line">            http.disconnect();</div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 得到cookie</div><div class="line">     * </div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getCookie</span><span class="params">(HttpURLConnection http)</span> </span>&#123;</div><div class="line">        String cookieVal = <span class="keyword">null</span>;</div><div class="line">        String key = <span class="keyword">null</span>;</div><div class="line">        AppSession.mCookieStore = <span class="string">""</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; (key = http.getHeaderFieldKey(i)) != <span class="keyword">null</span>; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (key.equalsIgnoreCase(<span class="string">"set-cookie"</span>)) &#123;</div><div class="line">                cookieVal = http.getHeaderField(i);</div><div class="line">                cookieVal = cookieVal.substring(<span class="number">0</span>, cookieVal.indexOf(<span class="string">";"</span>));</div><div class="line">                AppSession.mCookieStore = AppSession.mCookieStore + cookieVal</div><div class="line">                        + <span class="string">";"</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="WebService"><a href="#WebService" class="headerlink" title="WebService"></a>WebService</h2><p>学习.《Web Service开发详解》资料中详细介绍了WebService</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/http/" rel="tag">#http</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/10/04/hello-world/" rel="prev" title="Hello World">
                Hello World <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Liu Yang" />
          <p class="site-author-name" itemprop="name">Liu Yang</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">20</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">20</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP"><span class="nav-number">1.</span> <span class="nav-text">HTTP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP协议的主要特点"><span class="nav-number">1.1.</span> <span class="nav-text">HTTP协议的主要特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP协议URL详解"><span class="nav-number">1.2.</span> <span class="nav-text">HTTP协议URL详解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP协议请求详解"><span class="nav-number">1.3.</span> <span class="nav-text">HTTP协议请求详解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP协议响应详解"><span class="nav-number">1.4.</span> <span class="nav-text">HTTP协议响应详解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP协议消息报头详解"><span class="nav-number">1.5.</span> <span class="nav-text">HTTP协议消息报头详解</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTPS"><span class="nav-number">2.</span> <span class="nav-text">HTTPS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#WebService"><span class="nav-number">3.</span> <span class="nav-text">WebService</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liu Yang</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
